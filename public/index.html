<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]>      <html class="no-js"> <!--<![endif]-->
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Warcraft-ish</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="jquery/jqueryui/jquery-ui.min.css">
        <script src="jquery/jqueryui/external/jquery/jquery.js"></script>
        <script src="jquery/jqueryui/jquery-ui.min.js"></script>
        <script src="jquery/jquery-3.6.0.min.js"></script>
        <script src="js/astar/astar.js"></script>
        <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="css/grid.css">
        <!--Import Google Icon Font-->
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <!--Import materialize.css-->
        <link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/>

        <!--Let browser know website is optimized for mobile-->
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    </head>

    <!-- On chrome the drag event kept getting triggered and couldn't figure out why, it was messing with
        the select indicator so I disabled it. -->
    <body ondragstart="return false;" ondrop="return false;" draggable="false">
        <header></header>
        <main>
            <!--[if lt IE 7]>
                <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="#">upgrade your browser</a> to improve your experience.</p>
            <![endif]-->

            <!-- oncontextmenu="rightClickContextMenu(event)" -->
            <div id="main"  oncontextmenu="rightClickContextMenu(event)"
                class="background"
                onmousedown="onSelectMouseDown(event)"
            >
                <div id="peasant1" class="peasant"></div>
                <div id="peasant2" class="peasant"></div>
                <div id="peasant3" class="peasant"></div>

                <div id="search_grid">
                    <?php if (isset($grid) && (count($grid) > 0)) : ?>
                    <?php foreach ($grid as $row_item): ?>
                        <div class="clear">
                        <?php foreach ($row_item as $grid_item): ?>
                            <span class="grid_item weight1"
                                id="cell_<?=$grid_item->x;?>_<?=$grid_item->y;?>"
                                x="<?=$grid_item->x;?>"
                                y="<?=$grid_item->y;?>"
                            >
                            </span>
                        <?php endforeach ?>
                        </div>
                    <?php endforeach ?>
                    <?php endif ?>
                </div>
            </div>
        </main>
        <footer class="footer page-footer grey darken-4 valign-wrapper">
            <a style="display:none" class="waves-effect waves-light btn-small grey darken-3" id="btnDoSomething">Do Something</a>
        </footer>

         <!-- JavaScript at end of body for optimized loading -->
        <script type="text/javascript" src="js/materialize.min.js"></script>

         <!--The file for generic functions until I can better organize -->
        <script src="script/script.js" async defer></script>

        <!-- The displaying of the click and drag rectangle and other mouse related things. -->
        <script src="script/clickndragbox.js"></script>

        <!-- Code to display a grid and manage path finding and movement -->
        <script src="script/grid.js"></script>
        <script>
            $(document).ready(function() {

                // Only for the peasants we start with, will need to create new peasants at some point and add onclick event on creation.
                const peasants = document.querySelectorAll('.peasant');
                peasants.forEach(peasant => {
                    peasant.onclick = function(event) {
                        selectUnit(this.id);
                    }
                });

            });
        </script>
    </body>
</html>